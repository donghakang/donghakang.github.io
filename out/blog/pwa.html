<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>ğŸ‘‹ğŸ» ê°• ë™ í•˜ ì… ë‹ˆ ë‹¤</title><meta name="next-head-count" content="3"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-c407bf5c53d24278.js" defer=""></script><script src="/_next/static/chunks/framework-bb5c596eafb42b22.js" defer=""></script><script src="/_next/static/chunks/main-0e0d551d8cb2fab9.js" defer=""></script><script src="/_next/static/chunks/pages/_app-458f400add25ce09.js" defer=""></script><script src="/_next/static/chunks/243-598ab890f6343944.js" defer=""></script><script src="/_next/static/chunks/74-5d95be911dc91b5d.js" defer=""></script><script src="/_next/static/chunks/14-2fa588adf6fd373a.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-f6e2a2e467c68232.js" defer=""></script><script src="/_next/static/bUOwiugLFItrtWRQMMTG4/_buildManifest.js" defer=""></script><script src="/_next/static/bUOwiugLFItrtWRQMMTG4/_ssgManifest.js" defer=""></script><script src="/_next/static/bUOwiugLFItrtWRQMMTG4/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><style data-emotion="css-global 1yyxit1">@font-face{font-family:"Inter";src:url("/fonts/Inter.ttf");}html,body{padding:0;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;cursor:none;}html *,body *{cursor:none;}a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}h1{font-family:"Inter",-apple-system,sans-serif;}*{box-sizing:border-box;}:root{--mobile-view:768px;}.c-hidden{opacity:0;}.c-click{-webkit-transform:translate(-50%, -50%) scale(0.5)!important;-moz-transform:translate(-50%, -50%) scale(0.5)!important;-ms-transform:translate(-50%, -50%) scale(0.5)!important;transform:translate(-50%, -50%) scale(0.5)!important;background-color:orange!important;}.c-image-hover{width:300px!important;height:300px!important;}.c-image-hover *{width:100%!important;height:100%!important;}h1{font-family:"Inter",sans-serif;font-weight:800;line-height:0.8;}</style><style data-emotion="css 1au9tvf">.css-1au9tvf{width:40px;height:40px;border:4px solid orange;border-radius:100%;position:fixed;-webkit-transform:translate(-50%, -50%);-moz-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%);z-index:98;transition-property:opacity;pointer-events:none;-webkit-transition:all 100ms ease;transition:all 100ms ease;transition-property:opacity,background-color,transform,width,height;}.css-1au9tvf .image-wrapper{position:absolute;border-radius:100%;width:0;height:0;}.css-1au9tvf .image-wrapper .profile_image{width:100%;height:100%;border-radius:100%;}</style><div class="cursor css-1au9tvf e1vgqk5c0" style="top:0px;left:0px"><div class="image-wrapper"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:absolute;top:0;left:0;bottom:0;right:0"><img alt="profile" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fill" class="profile_image" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="profile" sizes="100vw" srcSet="/img/profile.png?imwidth=640 640w, /img/profile.png?imwidth=750 750w, /img/profile.png?imwidth=828 828w, /img/profile.png?imwidth=1080 1080w, /img/profile.png?imwidth=1200 1200w, /img/profile.png?imwidth=1920 1920w, /img/profile.png?imwidth=2048 2048w, /img/profile.png?imwidth=3840 3840w" src="/img/profile.png?imwidth=3840" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="profile_image" loading="lazy"/></noscript></span></div></div><style data-emotion="css k8l115">.css-k8l115{margin:0;padding:0;height:60px;width:100%;position:fixed;top:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;z-index:9;font-size:1.125rem;color:#ff8d1e;}.css-k8l115 .logo{margin-left:2rem;}.css-k8l115 .logo *{font-family:helvetica;font-weight:700;font-size:2.25rem;letter-spacing:-0.125em;-webkit-text-decoration:none;text-decoration:none;}.css-k8l115 ul{margin:0;margin-right:2rem;padding:0;list-style-type:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-k8l115 ul li{margin:0px 20px;}.css-k8l115 ul li .link{display:inline-block;-webkit-text-decoration:none;text-decoration:none;font-size:1.25rem;font-weight:700;letter-spacing:-0.04em;-webkit-transition:all 0.3s;transition:all 0.3s;}.css-k8l115 ul li button{background:none;border:none;outline:inherit;}.css-k8l115 .hamburger-menu{display:none;background:none;border:none;outline:inherit;margin-right:20px;}@media only screen and (max-width: 768px){.css-k8l115 ul{background-color:white;z-index:8;margin:0;padding:20px 0 0 0;position:absolute;display:block;top:0;right:0;-webkit-transform:translateX(60vw);-moz-transform:translateX(60vw);-ms-transform:translateX(60vw);transform:translateX(60vw);-webkit-transition:-webkit-transform 0.2s;transition:transform 0.2s;transition-timing-function:ease-in-out;width:60vw;height:100vh;}.css-k8l115 ul li{margin:12px;}.css-k8l115 ul li .emoji{left:0px;-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);}.css-k8l115 ul li:first-child{margin-top:40px;}.css-k8l115 .hamburger-menu{color:#ff8d1e;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;z-index:9;}.css-k8l115 .nav-background{z-index:7;position:absolute;top:0%;left:0%;width:100vw;height:100vh;background-color:black;opacity:0.8;-webkit-transition:all 0.2s;transition:all 0.2s;}}</style><nav class="css-k8l115 es9g5vl0"><div class="logo"><a href="/">DH</a></div><ul class="nav-menu"><li><style data-emotion="css sxrh4">.css-sxrh4:hover{color:orange;-webkit-transform:scale(1, 0.8);-moz-transform:scale(1, 0.8);-ms-transform:scale(1, 0.8);transform:scale(1, 0.8);}</style><a class="link css-sxrh4">ABOUT</a></li><li><a class="link css-sxrh4">PROJECT</a></li><li><a class="link css-sxrh4">BLOG</a></li></ul><button class="hamburger-menu"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="32" width="32" xmlns="http://www.w3.org/2000/svg"><path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"></path></svg></button></nav><style data-emotion="css 4r3xwx">.css-4r3xwx{margin:auto;max-width:768px;padding:1rem;}</style><div class="css-4r3xwx e99267g1" style="opacity:1;transform:scale(0) translateZ(0)"><style data-emotion="css 1720ti3">.css-1720ti3{margin:4rem auto;}.css-1720ti3 h1{font-size:4rem;line-height:1;}.css-1720ti3 .title-info{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-1720ti3 .title-info .memoji{background-color:greenyellow;border-radius:50px;}.css-1720ti3 .title-info *{margin:0.4rem;}@media only screen and (max-width: 768px){.css-1720ti3 h1{font-size:3rem;}}</style><div class="css-1720ti3 e99267g0" style="opacity:0;transform:translateY(-20px) translateZ(0)"><h1>PWAğŸ—‚ì— ëŒ€í•˜ì—¬</h1><div class="title-info"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2775%27%20height=%2775%27/%3e"/></span><img alt="donghakang" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="memoji" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img alt="donghakang" srcSet="/img/memoji.png?imwidth=96 1x, /img/memoji.png?imwidth=256 2x" src="/img/memoji.png?imwidth=256" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="memoji" loading="lazy"/></noscript></span><strong>Dongha Kang</strong><span>2022-03-08</span></div><div class="chip-info"><style data-emotion="css rzyiqk">.css-rzyiqk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;overflow:scroll;}.css-rzyiqk .tag-chip{background-color:lightgreen;padding:2px 12px;border-radius:12px;margin:4px 8px;}</style><div class="tag-chip-wrapper css-rzyiqk e312tvn0"><span class="tag-chip">Service Worker</span><span class="tag-chip">PWA</span></div></div></div><div style="opacity:0;transform:translateY(-20px) translateZ(0)"><p>PWAë€, ì•±ì²˜ëŸ¼ ë³´ì—¬ì§€ëŠ” ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ë¼ê³  ì´í•´í•  ìˆ˜ ìˆë‹¤. íŠ¹ì§•ìœ¼ë¡œì„œëŠ”</p>
<ul>
<li>í™ˆ ìŠ¤í¬ë¦° ì•„ì´ì½˜ì„ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë©°, app launcher, launchpad, ì‹œì‘ ë©”ë‰´ê¹Œì§€ ì „ë¶€ ì„¤ì • ê°€ëŠ¥í•˜ë‹¤.</li>
<li>ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê²€ìƒ‰í• ë•Œë„ ì°¾ì„ ìˆ˜ ìˆë‹¤.</li>
<li>standaloneìœ¼ë¡œ ì‚¬ìš© í•  ìˆ˜ ìˆìœ¼ë©°, ë¸Œë¼ìš°ì € ì¸í„°í˜ì´ìŠ¤ì™€ë„ ë…ë¦½ ì‹œí‚¬ ìˆ˜ ìˆë‹¤.</li>
<li>OSì— ì•Œë§ê²Œ ì„¤ì •ë„ ê°€ëŠ¥í•˜ë‹¤.</li>
<li>offlineìƒì—ì„œë„ ì‹¤í–‰ ê°€ëŠ¥í•˜ë‹¤.</li>
<li>Push ë©”ì‹œì§€ë‚˜ ì•Œë¦¼ ê°™ì€ ê¸°ëŠ¥ êµ¬í˜„ ê°€ëŠ¥</li>
</ul>
<p>ì›¹ ì•±ì¸ë°ë„ ë¶ˆêµ¬í•˜ê³ !</p>
<p>ê·¸ ì „ì— Web ê³¼ Platform appì˜ ì¥ë‹¨ì ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ìë©´</p>
<p>Webì˜ ì¥ì </p>
<ul>
<li>ì—°ê²°ì„±, ì ‘ê·¼ì„±, ë°°í¬, ì—…ë°ì´íŠ¸, í¼ë¸”ë¦¬ì‹±</li>
</ul>
<p>Platformì˜ ì¥ì </p>
<ul>
<li>ì˜¤í”„ë¼ì¸, ë””ë°”ì´ìŠ¤ ì—°ê²°ì„±, ì•„ì´ì½˜, standalone, í¼í¬ë¨¼ìŠ¤</li>
</ul>
<p>PWAì˜ ì‹œì‘ì€ ì•„ë§ˆ ì´ ëª¨ë“  ê²ƒì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œì¼ ê²ƒì´ë‹¤.</p>
<p><style data-emotion="css 1wf6zbm">.css-1wf6zbm{padding:1rem;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}</style><div class="css-1wf6zbm"><style data-emotion="css 1d3w5wq">.css-1d3w5wq{width:100%;}</style><img src="/img/pwa1.png" alt="PWA ì˜ˆì‹œ" class="css-1d3w5wq"/><style data-emotion="css uo926q">.css-uo926q{color:#a3a3a3;padding:auto;margin-top:1rem;text-align:center;font-size:0.875rem;}</style><span class="css-uo926q">PWA ì˜ˆì‹œ</span></div></p>
<h2>ë°ì´í„° ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°</h2>
<p>platformìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ì•± ê°™ì€ ê²½ìš° ë¯¸ë¦¬ ë‹¤ìš´ë¡œë“œë¥¼ í•´ì„œ ì•±ì´ ê°€ì§€ê³  ìˆëŠ” Assetsê³¼ dataë¥¼ ë‹¤ìš´ë¡œë“œ ì‹œí‚¨ë‹¤. ê·¸ë˜ì„œ appìœ¼ë¡œ ì‚¬ìš©í•  ë•Œ, ì˜¤í”„ë¼ì¸ì¼ ë•Œë„ ê¸°ë³¸ì ì¸ assetsê³¼ dataë“¤ì„ ì‚¬ìš©í•  ìˆ˜ëŠ” ìˆë‹¤.</p>
<p>ë°˜ë©´ì—, web applicationì€ urlì— ë“¤ì–´ê°ˆë•Œë§ˆë‹¤ assetsê³¼ dataë¥¼ ë‹¤ìš´ë¡œë“œ í•˜ê¸° ë•Œë¬¸ì— assetsì´ ì—†ëŠ” í´ë¼ì´ì–¸íŠ¸ë¥¼ ë§Œ ë³´ì—¬ì§€ê²Œ ëœë‹¤. (ì¦‰, í•­ìƒ ë„¤íŠ¸ì›Œí¬ê°€ í•„ìš”í•˜ë‹¤)</p>
<p>Web ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë°œì „í•˜ë©´ì„œ Cacheì™€ ì €ì¥ê¸°ëŠ¥ë˜í•œ ë°œì „í–ˆëŠ”ë°. PWAëŠ” ì•„ë˜ì˜¤ì™€ê°™ì€ ê¸°ëŠ¥ë“¤ì„ ì‚¬ìš©í•œë‹¤.</p>
<ul>
<li>Web Storage: localStorage ì™€ sessionStorage. key value ê°’ì„ stringìœ¼ë¡œ ì €ì¥í•´ì„œ webì— ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. ë¬¼ë¡  ìš©ëŸ‰ì€ ì œí•œì ì´ë‹¤.</li>
<li>indexedDB: (No-SQL ê¸°ë°˜) binary data client-side. API requestë¡œ ë°›ê±°ë‚˜ ë³´ë‚´ëŠ” ê²ƒì„ ì €ì¥í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©ëœë‹¤. IndexedDB APIë„ ìˆì–´ì„œ db ê´€ë¦¬ í•  ë•Œë„ ìœ ìš©í•˜ë‹¤.</li>
<li>Cache Storage: HTTP requestì™€ response ì§ì„ ì €ì¥ ë° ê²€ìƒ‰í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<p>PWAëŠ” ì´ ê¸°ëŠ¥ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ëŠ” ìˆì§€ë§Œ, <strong>service workers</strong> ë¼ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ ë” ì—…ê·¸ë ˆì´ë“œ ì‹œí‚¬ ìˆ˜ ìˆë‹¤.</p>
<p>service workersms</p>
<ul>
<li>network í•„ìš”ì—†ì´ assetsë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤</li>
<li>ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ì„ ì¤€ë‹¤.</li>
<li>PWA ì•„ì´ì½˜ì— ë±ƒì§€ë¥¼ ë‹¬ ìˆ˜ ìˆë‹¤</li>
<li>ì—…ë°ì´íŠ¸ ê°€ëŠ¥í•˜ë‹¤</li>
<li>PWAê°€ ì˜¤í”„ë¼ì¸ìœ¼ë¡œ ì¼ í•  ìˆ˜ìˆëŠ” ê°€ì¥ í° ì—­í• ì„ í•œë‹¤.</li>
</ul>
<h2>service workers</h2>
<p><div class="css-1wf6zbm"><img src="/img/service-worker.png" alt="service worker ë¸”ë£¨ í”„ë¦°íŠ¸" class="css-1d3w5wq"/><span class="css-uo926q">service worker ë¸”ë£¨ í”„ë¦°íŠ¸</span></div></p>
<p>service workerëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ requestë¥¼ ë³´ë‚¼ ë•Œ, ë§ˆì¹˜ ë„¤íŠ¸ì›Œí¬ í”„ë¡ì‹œ ì²˜ëŸ¼ (ì˜¤í”„ë¼ì¸ì¼ë•Œë„) requestë¥¼ ë°›ì•„ì„œ Cache storage APIì—ì„œ ì •ë³´ë¥¼ ë°›ì•„ì˜¬ì§€, ë„¤íŠ¸ì›Œí¬ë¥¼ ì´ìš©í•˜ì—¬ ì •ë³´ë¥¼ ë°›ì•„ì˜¬ì§€, í˜¹ì€ local ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì •ë³´ë¥¼ ë°›ì•„ì˜¬ ì§€ ì •í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ë§ˆì¹˜ platform ì•±ë“¤ ì²˜ëŸ¼. ë” ë‚˜ì•„ê°€ service workersëŠ” ì´ëŸ¬í•œ ì¼ë“¤ ë„ ê°€ëŠ¥í•˜ê²Œ ë§Œë“ ë‹¤.</p>
<ul>
<li>ì˜¤í”„ë¼ì¸ìœ¼ë¡œ ì½˜í…íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°</li>
<li>background sync</li>
<li>push notification</li>
</ul>
<h3>life cycle</h3>
<ol>
<li>main.js ì—ì„œ service workerë¥¼ ì–¸ê¸‰í•˜ë©° ë“±ë¡(register)ì„ í•œë‹¤. (í˜¹ì€ index.htmlì—ì„œ ë°”ë¡œ...)</li>
<li>registerí›„ eventë¥¼ install í•œë‹¤.</li>
<li>installì„ í•˜ë©´ service workerê°€ activate ëœë‹¤.</li>
<li>event ë¥¼ active ì‹œí‚¨ë‹¤.</li>
<li>service workerê°€ eventë¥¼ í™•ì¸í•˜ê³  responseë¥¼ ê°ì§€í•˜ê¸° ì‹œì‘í•œë‹¤.</li>
</ol>
<p>âš ï¸Â service workerê°€ ë°”ë€Œì§€ ì•ŠëŠ”ë‹¤ë©´ 2, 3, 4ëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. ë§Œì•½ service workerê°€ ì—…ë°ì´íŠ¸ ëœë‹¤ë©´ 2,3,4ëŠ” ë‹¤ì‹œ ì‹¤í–‰ì´ ëœë‹¤.</p>
<h3>code</h3>
<pre><div style="color:#f8f8f2;background:#272822;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-jsx" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8292a2">// main.js</span><span>
</span>
<span></span><span class="token" style="color:#8292a2">// Register</span><span>
</span><span></span><span class="token control-flow" style="color:#66d9ef">if</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;serviceWorker&quot;</span><span> </span><span class="token" style="color:#66d9ef">in</span><span> </span><span class="token dom" style="color:#f8f8f2">navigator</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>  </span><span class="token console" style="color:#e6db74">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;Service Worker supported&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>  </span><span class="token dom" style="color:#f8f8f2">window</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">addEventListener</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;load&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token dom" style="color:#f8f8f2">navigator</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">serviceWorker</span><span>
</span><span>      </span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">register</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;sw.js&quot;</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>      </span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">then</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">reg</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token console" style="color:#e6db74">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;Service worker registered&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> reg</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>      </span><span class="token" style="color:#f8f8f2">.</span><span class="token control-flow" style="color:#66d9ef">catch</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">err</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token console" style="color:#e6db74">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">warn</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;Service worker Error&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> err</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>  </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></div></pre>
<pre><div style="color:#f8f8f2;background:#272822;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-jsx" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8292a2">// sw.js</span><span>
</span>
<span></span><span class="token" style="color:#8292a2">// default cache</span><span>
</span><span></span><span class="token" style="color:#66d9ef">const</span><span> cacheName </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#a6e22e">&quot;v1&quot;</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span></span><span class="token" style="color:#66d9ef">const</span><span> cacheAssets </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span>
</span><span>  </span><span class="token" style="color:#a6e22e">&quot;index.html&quot;</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>  </span><span class="token" style="color:#a6e22e">&quot;about.html&quot;</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>  </span><span class="token" style="color:#a6e22e">&quot;/css/style.css&quot;</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>  </span><span class="token" style="color:#a6e22e">&quot;/js/main.js&quot;</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span></span><span class="token" style="color:#8292a2">// Install</span><span>
</span><span>self</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">addEventListener</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;install&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">e</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>  </span><span class="token console" style="color:#e6db74">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;Service worker installed&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>  e</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">waitUntil</span><span class="token" style="color:#f8f8f2">(</span><span>
</span>    caches
<span>      </span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">open</span><span class="token" style="color:#f8f8f2">(</span><span>cacheName</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>      </span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">then</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">cache</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token console" style="color:#e6db74">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;Service Worker: Caching files&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        cache</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">addAll</span><span class="token" style="color:#f8f8f2">(</span><span>cacheAssets</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>      </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>      </span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">then</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        self</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">skipWaiting</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>      </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#8292a2">//ì—¬ê¸° ê¹Œì§€ ì§„í–‰ì´ ëœë‹¤ë©´ Cache Storageì— cache Assetsê°€ ì €ì¥ì´ ëœë‹¤.</span><span>
</span><span>  </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span> </span><span class="token" style="color:#8292a2">// promiseê°€ ëë‚ ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span></span><span class="token" style="color:#8292a2">// Activate</span><span>
</span><span>self</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">addEventListener</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;activate&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">e</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>  </span><span class="token console" style="color:#e6db74">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;Service Worker activated&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>  </span><span class="token" style="color:#8292a2">// Remove unwanted caches</span><span>
</span><span>  e</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">waitUntil</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>    caches</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">keys</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">then</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">cacheNames</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#66d9ef">return</span><span> </span><span class="token known-class-name" style="color:#e6db74">Promise</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">all</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>        cachesNames</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">map</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">cache</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>          </span><span class="token control-flow" style="color:#66d9ef">if</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span>cache </span><span class="token" style="color:#f8f8f2">!==</span><span> cacheName</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>            </span><span class="token" style="color:#8292a2">// cache ì´ë¦„ì´ ê°™ì§€ ì•Šë‹¤ë©´ ì˜›ë‚  ìºì‰¬ë¥¼ ì§€ìš´ë‹¤.</span><span>
</span><span>            </span><span class="token console" style="color:#e6db74">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;Service Worker: Clearing old cache&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>            </span><span class="token control-flow" style="color:#66d9ef">return</span><span> caches</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">delete</span><span class="token" style="color:#f8f8f2">(</span><span>cache</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>          </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>      </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>  </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span> </span><span class="token" style="color:#8292a2">// ì˜›ë‚  ìºì‹œë“¤ì„ ì§€ìš°ê³  ìƒˆë¡œìš´ ë²„ì „ì„ ë®ëŠ”ë‹¤.</span><span>
</span>
<span></span><span class="token" style="color:#8292a2">// Call fetch event</span><span>
</span><span>self</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">addEventListener</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;fetch&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">e</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>  </span><span class="token console" style="color:#e6db74">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&#x27;Service Worker: Fetcdhing...&quot;&#x27;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>  e</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">respondWith</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>    </span><span class="token" style="color:#e6db74">fetch</span><span class="token" style="color:#f8f8f2">(</span><span>e</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">request</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">.</span><span class="token control-flow" style="color:#66d9ef">catch</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> caches</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">match</span><span class="token" style="color:#f8f8f2">(</span><span>e</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">request</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#8292a2">// Cache ì— ìˆëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— ì»¨ë‚µì…˜ì´ ì—†ì–´ë„ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆë”°.</span><span>
</span><span>  </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<p>ë˜ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œëŠ” cacheì— ëª¨ë“  responseë¥¼ ë‹¤ ë°›ì•„ì˜¤ëŠ” ë°©ë²•ì´ í•˜ë‚˜ ë” ìˆë‹¤. í˜ì´ì§€(íŒŒì¼)ì„ í•˜ë‚˜ í•˜ë‚˜ ë‹¤ cacheNamesë¡œ ì–¸ê¸‰í•  í•„ìš” ì—†ì´ ëª¨ë“  í˜ì´ì§€ë¥¼ (ë°©ë¬¸í•œ) ì „ë¶€ cacheì— ì €ì¥í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.</p>
<pre><div style="color:#f8f8f2;background:#272822;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-jsx" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8292a2">// default cache</span><span>
</span><span></span><span class="token" style="color:#66d9ef">const</span><span> cacheName </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#a6e22e">&quot;v2&quot;</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span></span><span class="token" style="color:#8292a2">// Install</span><span>
</span><span>self</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">addEventListener</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;install&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">e</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>  </span><span class="token console" style="color:#e6db74">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;Service worker installed&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span></span><span class="token" style="color:#8292a2">// Activate</span><span>
</span><span>self</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">addEventListener</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;activate&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">e</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>  </span><span class="token console" style="color:#e6db74">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;Service Worker activated&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>  </span><span class="token" style="color:#8292a2">// Remove unwanted caches</span><span>
</span><span>  e</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">waitUntil</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>    caches</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">keys</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">then</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">cacheNames</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#66d9ef">return</span><span> </span><span class="token known-class-name" style="color:#e6db74">Promise</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">all</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>        cachesNames</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">map</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">cache</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>          </span><span class="token control-flow" style="color:#66d9ef">if</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span>cache </span><span class="token" style="color:#f8f8f2">!==</span><span> cacheName</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>            </span><span class="token" style="color:#8292a2">// cache ì´ë¦„ì´ ê°™ì§€ ì•Šë‹¤ë©´ ì˜›ë‚  ìºì‰¬ë¥¼ ì§€ìš´ë‹¤.</span><span>
</span><span>            </span><span class="token console" style="color:#e6db74">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;Service Worker: Clearing old cache&quot;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>            </span><span class="token control-flow" style="color:#66d9ef">return</span><span> caches</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">delete</span><span class="token" style="color:#f8f8f2">(</span><span>cache</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>          </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>      </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>    </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>  </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span> </span><span class="token" style="color:#8292a2">// ì˜›ë‚  ìºì‹œë“¤ì„ ì§€ìš°ê³  ìƒˆë¡œìš´ ë²„ì „ì„ ë®ëŠ”ë‹¤.</span><span>
</span>
<span></span><span class="token" style="color:#8292a2">// Call fetch event</span><span>
</span><span>self</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">addEventListener</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&quot;fetch&quot;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">e</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>  </span><span class="token console" style="color:#e6db74">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#a6e22e">&#x27;Service Worker: Fetcdhing...&quot;&#x27;</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>  e</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">respondWith</span><span class="token" style="color:#f8f8f2">(</span><span>
</span><span>    </span><span class="token" style="color:#e6db74">fetch</span><span class="token" style="color:#f8f8f2">(</span><span>e</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">request</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>      </span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">then</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">res</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>        </span><span class="token" style="color:#8292a2">// Make copy/clone of response</span><span>
</span><span>        </span><span class="token" style="color:#66d9ef">const</span><span> resClone </span><span class="token" style="color:#f8f8f2">=</span><span> res</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">clone</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span>        </span><span class="token" style="color:#8292a2">// Open cache</span><span>
</span><span>        caches</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">open</span><span class="token" style="color:#f8f8f2">(</span><span>cacheName</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">then</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">cache</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>          </span><span class="token" style="color:#8292a2">// Add response to cache</span><span>
</span><span>          cache</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">put</span><span class="token" style="color:#f8f8f2">(</span><span>e</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">request</span><span class="token" style="color:#f8f8f2">,</span><span> resClone</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>        </span><span class="token control-flow" style="color:#66d9ef">return</span><span> res</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span>      </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>      </span><span class="token" style="color:#f8f8f2">.</span><span class="token control-flow" style="color:#66d9ef">catch</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">err</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> caches</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">match</span><span class="token" style="color:#f8f8f2">(</span><span>e</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">request</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#e6db74">then</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">res</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> res</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>  </span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span></code></div></pre>
<hr/>
<h2>Caching</h2>
<p>ì´ì œ cache storageê°€ pwaì—ì„œ ì–¼ë§ˆë‚˜ ì¤‘ìš”í•œì§€ ì•Œì•„ ëƒˆë‹¤ë©´, ë¬´ì—‡ì„ caching í•´ì•¼í• ê¹Œ?</p>
<ul>
<li>main html</li>
<li>css</li>
<li>UIì— ì‚¬ìš©ë˜ëŠ” ì´ë¯¸ì§€ë“¤</li>
<li>UIì— ì‚¬ìš©ë˜ëŠ” javascript</li>
<li>ê¸°ë³¸ ë°ì´í„° (JSON)</li>
<li>í°íŠ¸</li>
<li>SPAê°€ ì•„ë‹Œ ìƒí™©ì—ì„œ ë¹ ë¥¸ page ë³€ê²½ì´ í•„ìš”í• ë•Œ</li>
</ul>
<p>Service WorkerëŠ” ì´ í˜ì´ì§€ì—ì„œ ê°ë‹¹í•˜ê¸°ì—ëŠ” ë„ˆë¬´ë‚˜ë„ ë§ì€ ì´ì•¼ê¸° ì´ë‹ˆê¹... <a href="https://web.dev/learn/pwa/">ì—¬ê¸°</a>ì—ì„œ í™•ì¸í•´ì£¼ì...</p>
<p>ë‚˜ì¤‘ì—ëŠ” Workboxë„ í•œë²ˆ ê³µë¶€ í•´ë³´ì .. (32%ê°€ ì‚¬ìš©í•˜ëŠ” service workers ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¼ëŠ”ë° ...)</p>
<hr/>
<h2>React &amp; PWA</h2>
<p>React ë„ ë¹„ìŠ·í•˜ê²Œ ì§„í–‰ì´ ë˜ê¸° ë•Œë¬¸ì— <a href="https://github.com/donghakang/practice-react/tree/master/ex33-pwa">source code</a> ë¥¼ ë³´ë©´ì„œ PWAë¥¼ ë§Œë“¤ì–´ë³´ì!</p></div><div style="opacity:0;transform:translateY(-20px) translateZ(0)"><style data-emotion="css k82dzb">.css-k82dzb{margin:2rem 0;}</style><section class="css-k82dzb"></section></div></div><style data-emotion="css ltun1a">.css-ltun1a{position:fixed;bottom:1rem;left:1rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;color:#ff8d1e;}.css-ltun1a a{margin:0.5rem;}.css-ltun1a a:hover{color:orange;}</style><footer class="footer css-ltun1a e1u4kp8a0"><a href="https://github.com/donghakang"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="30" width="30" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a href="https://facebook.com/dkang0602"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="30" width="30" xmlns="http://www.w3.org/2000/svg"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg></a><a href="https://instagram.com/donghakang"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="30" width="30" xmlns="http://www.w3.org/2000/svg"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg></a><a href="mailto:dkang0602@gmail.com"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="30" width="30" xmlns="http://www.w3.org/2000/svg"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></a></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontMatter":{"title":"PWAğŸ—‚ì— ëŒ€í•˜ì—¬","author":"Dongha Kang","date":"2022-03-08","tag":["Service Worker","PWA"]},"slug":"pwa","mdxSource":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, {})\n  })) : _createMdxContent();\n  function _createMdxContent() {\n    const _components = Object.assign({\n      p: \"p\",\n      ul: \"ul\",\n      li: \"li\",\n      img: \"img\",\n      h2: \"h2\",\n      strong: \"strong\",\n      h3: \"h3\",\n      ol: \"ol\",\n      pre: \"pre\",\n      code: \"code\",\n      hr: \"hr\",\n      a: \"a\"\n    }, _provideComponents(), props.components);\n    return _jsxs(_Fragment, {\n      children: [_jsx(_components.p, {\n        children: \"PWAë€, ì•±ì²˜ëŸ¼ ë³´ì—¬ì§€ëŠ” ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ë¼ê³  ì´í•´í•  ìˆ˜ ìˆë‹¤. íŠ¹ì§•ìœ¼ë¡œì„œëŠ”\"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"í™ˆ ìŠ¤í¬ë¦° ì•„ì´ì½˜ì„ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë©°, app launcher, launchpad, ì‹œì‘ ë©”ë‰´ê¹Œì§€ ì „ë¶€ ì„¤ì • ê°€ëŠ¥í•˜ë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê²€ìƒ‰í• ë•Œë„ ì°¾ì„ ìˆ˜ ìˆë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"standaloneìœ¼ë¡œ ì‚¬ìš© í•  ìˆ˜ ìˆìœ¼ë©°, ë¸Œë¼ìš°ì € ì¸í„°í˜ì´ìŠ¤ì™€ë„ ë…ë¦½ ì‹œí‚¬ ìˆ˜ ìˆë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"OSì— ì•Œë§ê²Œ ì„¤ì •ë„ ê°€ëŠ¥í•˜ë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"offlineìƒì—ì„œë„ ì‹¤í–‰ ê°€ëŠ¥í•˜ë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"Push ë©”ì‹œì§€ë‚˜ ì•Œë¦¼ ê°™ì€ ê¸°ëŠ¥ êµ¬í˜„ ê°€ëŠ¥\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ì›¹ ì•±ì¸ë°ë„ ë¶ˆêµ¬í•˜ê³ !\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ê·¸ ì „ì— Web ê³¼ Platform appì˜ ì¥ë‹¨ì ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ìë©´\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Webì˜ ì¥ì \"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"ì—°ê²°ì„±, ì ‘ê·¼ì„±, ë°°í¬, ì—…ë°ì´íŠ¸, í¼ë¸”ë¦¬ì‹±\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Platformì˜ ì¥ì \"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"ì˜¤í”„ë¼ì¸, ë””ë°”ì´ìŠ¤ ì—°ê²°ì„±, ì•„ì´ì½˜, standalone, í¼í¬ë¨¼ìŠ¤\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"PWAì˜ ì‹œì‘ì€ ì•„ë§ˆ ì´ ëª¨ë“  ê²ƒì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œì¼ ê²ƒì´ë‹¤.\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: _jsx(_components.img, {\n          src: \"/img/pwa1.png\",\n          alt: \"PWA ì˜ˆì‹œ\"\n        })\n      }), \"\\n\", _jsx(_components.h2, {\n        children: \"ë°ì´í„° ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"platformìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ì•± ê°™ì€ ê²½ìš° ë¯¸ë¦¬ ë‹¤ìš´ë¡œë“œë¥¼ í•´ì„œ ì•±ì´ ê°€ì§€ê³  ìˆëŠ” Assetsê³¼ dataë¥¼ ë‹¤ìš´ë¡œë“œ ì‹œí‚¨ë‹¤. ê·¸ë˜ì„œ appìœ¼ë¡œ ì‚¬ìš©í•  ë•Œ, ì˜¤í”„ë¼ì¸ì¼ ë•Œë„ ê¸°ë³¸ì ì¸ assetsê³¼ dataë“¤ì„ ì‚¬ìš©í•  ìˆ˜ëŠ” ìˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ë°˜ë©´ì—, web applicationì€ urlì— ë“¤ì–´ê°ˆë•Œë§ˆë‹¤ assetsê³¼ dataë¥¼ ë‹¤ìš´ë¡œë“œ í•˜ê¸° ë•Œë¬¸ì— assetsì´ ì—†ëŠ” í´ë¼ì´ì–¸íŠ¸ë¥¼ ë§Œ ë³´ì—¬ì§€ê²Œ ëœë‹¤. (ì¦‰, í•­ìƒ ë„¤íŠ¸ì›Œí¬ê°€ í•„ìš”í•˜ë‹¤)\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Web ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë°œì „í•˜ë©´ì„œ Cacheì™€ ì €ì¥ê¸°ëŠ¥ë˜í•œ ë°œì „í–ˆëŠ”ë°. PWAëŠ” ì•„ë˜ì˜¤ì™€ê°™ì€ ê¸°ëŠ¥ë“¤ì„ ì‚¬ìš©í•œë‹¤.\"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"Web Storage: localStorage ì™€ sessionStorage. key value ê°’ì„ stringìœ¼ë¡œ ì €ì¥í•´ì„œ webì— ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. ë¬¼ë¡  ìš©ëŸ‰ì€ ì œí•œì ì´ë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"indexedDB: (No-SQL ê¸°ë°˜) binary data client-side. API requestë¡œ ë°›ê±°ë‚˜ ë³´ë‚´ëŠ” ê²ƒì„ ì €ì¥í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©ëœë‹¤. IndexedDB APIë„ ìˆì–´ì„œ db ê´€ë¦¬ í•  ë•Œë„ ìœ ìš©í•˜ë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"Cache Storage: HTTP requestì™€ response ì§ì„ ì €ì¥ ë° ê²€ìƒ‰í•  ìˆ˜ ìˆë‹¤.\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"PWAëŠ” ì´ ê¸°ëŠ¥ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ëŠ” ìˆì§€ë§Œ, \", _jsx(_components.strong, {\n          children: \"service workers\"\n        }), \" ë¼ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ ë” ì—…ê·¸ë ˆì´ë“œ ì‹œí‚¬ ìˆ˜ ìˆë‹¤.\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"service workersms\"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"network í•„ìš”ì—†ì´ assetsë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ì„ ì¤€ë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"PWA ì•„ì´ì½˜ì— ë±ƒì§€ë¥¼ ë‹¬ ìˆ˜ ìˆë‹¤\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"ì—…ë°ì´íŠ¸ ê°€ëŠ¥í•˜ë‹¤\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"PWAê°€ ì˜¤í”„ë¼ì¸ìœ¼ë¡œ ì¼ í•  ìˆ˜ìˆëŠ” ê°€ì¥ í° ì—­í• ì„ í•œë‹¤.\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.h2, {\n        children: \"service workers\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: _jsx(_components.img, {\n          src: \"/img/service-worker.png\",\n          alt: \"service worker ë¸”ë£¨ í”„ë¦°íŠ¸\"\n        })\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"service workerëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ requestë¥¼ ë³´ë‚¼ ë•Œ, ë§ˆì¹˜ ë„¤íŠ¸ì›Œí¬ í”„ë¡ì‹œ ì²˜ëŸ¼ (ì˜¤í”„ë¼ì¸ì¼ë•Œë„) requestë¥¼ ë°›ì•„ì„œ Cache storage APIì—ì„œ ì •ë³´ë¥¼ ë°›ì•„ì˜¬ì§€, ë„¤íŠ¸ì›Œí¬ë¥¼ ì´ìš©í•˜ì—¬ ì •ë³´ë¥¼ ë°›ì•„ì˜¬ì§€, í˜¹ì€ local ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì •ë³´ë¥¼ ë°›ì•„ì˜¬ ì§€ ì •í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ë§ˆì¹˜ platform ì•±ë“¤ ì²˜ëŸ¼. ë” ë‚˜ì•„ê°€ service workersëŠ” ì´ëŸ¬í•œ ì¼ë“¤ ë„ ê°€ëŠ¥í•˜ê²Œ ë§Œë“ ë‹¤.\"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"ì˜¤í”„ë¼ì¸ìœ¼ë¡œ ì½˜í…íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"background sync\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"push notification\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.h3, {\n        children: \"life cycle\"\n      }), \"\\n\", _jsxs(_components.ol, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"main.js ì—ì„œ service workerë¥¼ ì–¸ê¸‰í•˜ë©° ë“±ë¡(register)ì„ í•œë‹¤. (í˜¹ì€ index.htmlì—ì„œ ë°”ë¡œ...)\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"registerí›„ eventë¥¼ install í•œë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"installì„ í•˜ë©´ service workerê°€ activate ëœë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"event ë¥¼ active ì‹œí‚¨ë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"service workerê°€ eventë¥¼ í™•ì¸í•˜ê³  responseë¥¼ ê°ì§€í•˜ê¸° ì‹œì‘í•œë‹¤.\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"âš ï¸Â service workerê°€ ë°”ë€Œì§€ ì•ŠëŠ”ë‹¤ë©´ 2, 3, 4ëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. ë§Œì•½ service workerê°€ ì—…ë°ì´íŠ¸ ëœë‹¤ë©´ 2,3,4ëŠ” ë‹¤ì‹œ ì‹¤í–‰ì´ ëœë‹¤.\"\n      }), \"\\n\", _jsx(_components.h3, {\n        children: \"code\"\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-jsx\",\n          children: \"// main.js\\n\\n// Register\\nif (\\\"serviceWorker\\\" in navigator) {\\n  console.log(\\\"Service Worker supported\\\");\\n  window.addEventListener(\\\"load\\\", () =\u003e {\\n    navigator.serviceWorker\\n      .register(\\\"sw.js\\\")\\n      .then((reg) =\u003e console.log(\\\"Service worker registered\\\", reg))\\n      .catch((err) =\u003e console.warn(\\\"Service worker Error\\\", err));\\n  });\\n}\\n\"\n        })\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-jsx\",\n          children: \"// sw.js\\n\\n// default cache\\nconst cacheName = \\\"v1\\\";\\n\\nconst cacheAssets = [\\n  \\\"index.html\\\",\\n  \\\"about.html\\\",\\n  \\\"/css/style.css\\\",\\n  \\\"/js/main.js\\\",\\n];\\n\\n// Install\\nself.addEventListener(\\\"install\\\", (e) =\u003e {\\n  console.log(\\\"Service worker installed\\\");\\n\\n  e.waitUntil(\\n    caches\\n      .open(cacheName)\\n      .then((cache) =\u003e {\\n        console.log(\\\"Service Worker: Caching files\\\");\\n        cache.addAll(cacheAssets);\\n      })\\n      .then(() =\u003e {\\n        self.skipWaiting();\\n      }) //ì—¬ê¸° ê¹Œì§€ ì§„í–‰ì´ ëœë‹¤ë©´ Cache Storageì— cache Assetsê°€ ì €ì¥ì´ ëœë‹¤.\\n  ); // promiseê°€ ëë‚ ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤\\n});\\n\\n// Activate\\nself.addEventListener(\\\"activate\\\", (e) =\u003e {\\n  console.log(\\\"Service Worker activated\\\");\\n\\n  // Remove unwanted caches\\n  e.waitUntil(\\n    caches.keys().then((cacheNames) =\u003e {\\n      return Promise.all(\\n        cachesNames.map((cache) =\u003e {\\n          if (cache !== cacheName) {\\n            // cache ì´ë¦„ì´ ê°™ì§€ ì•Šë‹¤ë©´ ì˜›ë‚  ìºì‰¬ë¥¼ ì§€ìš´ë‹¤.\\n            console.log(\\\"Service Worker: Clearing old cache\\\");\\n            return caches.delete(cache);\\n          }\\n        })\\n      );\\n    })\\n  );\\n}); // ì˜›ë‚  ìºì‹œë“¤ì„ ì§€ìš°ê³  ìƒˆë¡œìš´ ë²„ì „ì„ ë®ëŠ”ë‹¤.\\n\\n// Call fetch event\\nself.addEventListener(\\\"fetch\\\", (e) =\u003e {\\n  console.log('Service Worker: Fetcdhing...\\\"');\\n  e.respondWith(\\n    fetch(e.request).catch(() =\u003e caches.match(e.request)) // Cache ì— ìˆëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— ì»¨ë‚µì…˜ì´ ì—†ì–´ë„ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆë”°.\\n  );\\n});\\n\"\n        })\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ë˜ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œëŠ” cacheì— ëª¨ë“  responseë¥¼ ë‹¤ ë°›ì•„ì˜¤ëŠ” ë°©ë²•ì´ í•˜ë‚˜ ë” ìˆë‹¤. í˜ì´ì§€(íŒŒì¼)ì„ í•˜ë‚˜ í•˜ë‚˜ ë‹¤ cacheNamesë¡œ ì–¸ê¸‰í•  í•„ìš” ì—†ì´ ëª¨ë“  í˜ì´ì§€ë¥¼ (ë°©ë¬¸í•œ) ì „ë¶€ cacheì— ì €ì¥í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-jsx\",\n          children: \"// default cache\\nconst cacheName = \\\"v2\\\";\\n\\n// Install\\nself.addEventListener(\\\"install\\\", (e) =\u003e {\\n  console.log(\\\"Service worker installed\\\");\\n});\\n\\n// Activate\\nself.addEventListener(\\\"activate\\\", (e) =\u003e {\\n  console.log(\\\"Service Worker activated\\\");\\n\\n  // Remove unwanted caches\\n  e.waitUntil(\\n    caches.keys().then((cacheNames) =\u003e {\\n      return Promise.all(\\n        cachesNames.map((cache) =\u003e {\\n          if (cache !== cacheName) {\\n            // cache ì´ë¦„ì´ ê°™ì§€ ì•Šë‹¤ë©´ ì˜›ë‚  ìºì‰¬ë¥¼ ì§€ìš´ë‹¤.\\n            console.log(\\\"Service Worker: Clearing old cache\\\");\\n            return caches.delete(cache);\\n          }\\n        })\\n      );\\n    })\\n  );\\n}); // ì˜›ë‚  ìºì‹œë“¤ì„ ì§€ìš°ê³  ìƒˆë¡œìš´ ë²„ì „ì„ ë®ëŠ”ë‹¤.\\n\\n// Call fetch event\\nself.addEventListener(\\\"fetch\\\", (e) =\u003e {\\n  console.log('Service Worker: Fetcdhing...\\\"');\\n  e.respondWith(\\n    fetch(e.request)\\n      .then((res) =\u003e {\\n        // Make copy/clone of response\\n        const resClone = res.clone();\\n\\n        // Open cache\\n        caches.open(cacheName).then((cache) =\u003e {\\n          // Add response to cache\\n          cache.put(e.request, resClone);\\n        });\\n        return res;\\n      })\\n      .catch((err) =\u003e caches.match(e.request).then((res) =\u003e res))\\n  );\\n});\\n\"\n        })\n      }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n        children: \"Caching\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ì´ì œ cache storageê°€ pwaì—ì„œ ì–¼ë§ˆë‚˜ ì¤‘ìš”í•œì§€ ì•Œì•„ ëƒˆë‹¤ë©´, ë¬´ì—‡ì„ caching í•´ì•¼í• ê¹Œ?\"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"main html\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"css\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"UIì— ì‚¬ìš©ë˜ëŠ” ì´ë¯¸ì§€ë“¤\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"UIì— ì‚¬ìš©ë˜ëŠ” javascript\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"ê¸°ë³¸ ë°ì´í„° (JSON)\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"í°íŠ¸\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"SPAê°€ ì•„ë‹Œ ìƒí™©ì—ì„œ ë¹ ë¥¸ page ë³€ê²½ì´ í•„ìš”í• ë•Œ\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"Service WorkerëŠ” ì´ í˜ì´ì§€ì—ì„œ ê°ë‹¹í•˜ê¸°ì—ëŠ” ë„ˆë¬´ë‚˜ë„ ë§ì€ ì´ì•¼ê¸° ì´ë‹ˆê¹... \", _jsx(_components.a, {\n          href: \"https://web.dev/learn/pwa/\",\n          children: \"ì—¬ê¸°\"\n        }), \"ì—ì„œ í™•ì¸í•´ì£¼ì...\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ë‚˜ì¤‘ì—ëŠ” Workboxë„ í•œë²ˆ ê³µë¶€ í•´ë³´ì .. (32%ê°€ ì‚¬ìš©í•˜ëŠ” service workers ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¼ëŠ”ë° ...)\"\n      }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n        children: \"React \u0026 PWA\"\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"React ë„ ë¹„ìŠ·í•˜ê²Œ ì§„í–‰ì´ ë˜ê¸° ë•Œë¬¸ì— \", _jsx(_components.a, {\n          href: \"https://github.com/donghakang/practice-react/tree/master/ex33-pwa\",\n          children: \"source code\"\n        }), \" ë¥¼ ë³´ë©´ì„œ PWAë¥¼ ë§Œë“¤ì–´ë³´ì!\"]\n      })]\n    });\n  }\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"pwa"},"buildId":"bUOwiugLFItrtWRQMMTG4","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>