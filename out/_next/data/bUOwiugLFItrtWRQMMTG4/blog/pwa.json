{"pageProps":{"frontMatter":{"title":"PWAğŸ—‚ì— ëŒ€í•˜ì—¬","author":"Dongha Kang","date":"2022-03-08","tag":["Service Worker","PWA"]},"slug":"pwa","mdxSource":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, {})\n  })) : _createMdxContent();\n  function _createMdxContent() {\n    const _components = Object.assign({\n      p: \"p\",\n      ul: \"ul\",\n      li: \"li\",\n      img: \"img\",\n      h2: \"h2\",\n      strong: \"strong\",\n      h3: \"h3\",\n      ol: \"ol\",\n      pre: \"pre\",\n      code: \"code\",\n      hr: \"hr\",\n      a: \"a\"\n    }, _provideComponents(), props.components);\n    return _jsxs(_Fragment, {\n      children: [_jsx(_components.p, {\n        children: \"PWAë€, ì•±ì²˜ëŸ¼ ë³´ì—¬ì§€ëŠ” ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ë¼ê³  ì´í•´í•  ìˆ˜ ìˆë‹¤. íŠ¹ì§•ìœ¼ë¡œì„œëŠ”\"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"í™ˆ ìŠ¤í¬ë¦° ì•„ì´ì½˜ì„ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë©°, app launcher, launchpad, ì‹œì‘ ë©”ë‰´ê¹Œì§€ ì „ë¶€ ì„¤ì • ê°€ëŠ¥í•˜ë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê²€ìƒ‰í• ë•Œë„ ì°¾ì„ ìˆ˜ ìˆë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"standaloneìœ¼ë¡œ ì‚¬ìš© í•  ìˆ˜ ìˆìœ¼ë©°, ë¸Œë¼ìš°ì € ì¸í„°í˜ì´ìŠ¤ì™€ë„ ë…ë¦½ ì‹œí‚¬ ìˆ˜ ìˆë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"OSì— ì•Œë§ê²Œ ì„¤ì •ë„ ê°€ëŠ¥í•˜ë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"offlineìƒì—ì„œë„ ì‹¤í–‰ ê°€ëŠ¥í•˜ë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"Push ë©”ì‹œì§€ë‚˜ ì•Œë¦¼ ê°™ì€ ê¸°ëŠ¥ êµ¬í˜„ ê°€ëŠ¥\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ì›¹ ì•±ì¸ë°ë„ ë¶ˆêµ¬í•˜ê³ !\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ê·¸ ì „ì— Web ê³¼ Platform appì˜ ì¥ë‹¨ì ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ìë©´\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Webì˜ ì¥ì \"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"ì—°ê²°ì„±, ì ‘ê·¼ì„±, ë°°í¬, ì—…ë°ì´íŠ¸, í¼ë¸”ë¦¬ì‹±\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Platformì˜ ì¥ì \"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"ì˜¤í”„ë¼ì¸, ë””ë°”ì´ìŠ¤ ì—°ê²°ì„±, ì•„ì´ì½˜, standalone, í¼í¬ë¨¼ìŠ¤\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"PWAì˜ ì‹œì‘ì€ ì•„ë§ˆ ì´ ëª¨ë“  ê²ƒì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œì¼ ê²ƒì´ë‹¤.\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: _jsx(_components.img, {\n          src: \"/img/pwa1.png\",\n          alt: \"PWA ì˜ˆì‹œ\"\n        })\n      }), \"\\n\", _jsx(_components.h2, {\n        children: \"ë°ì´í„° ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"platformìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ì•± ê°™ì€ ê²½ìš° ë¯¸ë¦¬ ë‹¤ìš´ë¡œë“œë¥¼ í•´ì„œ ì•±ì´ ê°€ì§€ê³  ìˆëŠ” Assetsê³¼ dataë¥¼ ë‹¤ìš´ë¡œë“œ ì‹œí‚¨ë‹¤. ê·¸ë˜ì„œ appìœ¼ë¡œ ì‚¬ìš©í•  ë•Œ, ì˜¤í”„ë¼ì¸ì¼ ë•Œë„ ê¸°ë³¸ì ì¸ assetsê³¼ dataë“¤ì„ ì‚¬ìš©í•  ìˆ˜ëŠ” ìˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ë°˜ë©´ì—, web applicationì€ urlì— ë“¤ì–´ê°ˆë•Œë§ˆë‹¤ assetsê³¼ dataë¥¼ ë‹¤ìš´ë¡œë“œ í•˜ê¸° ë•Œë¬¸ì— assetsì´ ì—†ëŠ” í´ë¼ì´ì–¸íŠ¸ë¥¼ ë§Œ ë³´ì—¬ì§€ê²Œ ëœë‹¤. (ì¦‰, í•­ìƒ ë„¤íŠ¸ì›Œí¬ê°€ í•„ìš”í•˜ë‹¤)\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Web ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë°œì „í•˜ë©´ì„œ Cacheì™€ ì €ì¥ê¸°ëŠ¥ë˜í•œ ë°œì „í–ˆëŠ”ë°. PWAëŠ” ì•„ë˜ì˜¤ì™€ê°™ì€ ê¸°ëŠ¥ë“¤ì„ ì‚¬ìš©í•œë‹¤.\"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"Web Storage: localStorage ì™€ sessionStorage. key value ê°’ì„ stringìœ¼ë¡œ ì €ì¥í•´ì„œ webì— ì €ì¥í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. ë¬¼ë¡  ìš©ëŸ‰ì€ ì œí•œì ì´ë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"indexedDB: (No-SQL ê¸°ë°˜) binary data client-side. API requestë¡œ ë°›ê±°ë‚˜ ë³´ë‚´ëŠ” ê²ƒì„ ì €ì¥í•  ë•Œ ì£¼ë¡œ ì‚¬ìš©ëœë‹¤. IndexedDB APIë„ ìˆì–´ì„œ db ê´€ë¦¬ í•  ë•Œë„ ìœ ìš©í•˜ë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"Cache Storage: HTTP requestì™€ response ì§ì„ ì €ì¥ ë° ê²€ìƒ‰í•  ìˆ˜ ìˆë‹¤.\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"PWAëŠ” ì´ ê¸°ëŠ¥ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ëŠ” ìˆì§€ë§Œ, \", _jsx(_components.strong, {\n          children: \"service workers\"\n        }), \" ë¼ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ ë” ì—…ê·¸ë ˆì´ë“œ ì‹œí‚¬ ìˆ˜ ìˆë‹¤.\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"service workersms\"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"network í•„ìš”ì—†ì´ assetsë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ì„ ì¤€ë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"PWA ì•„ì´ì½˜ì— ë±ƒì§€ë¥¼ ë‹¬ ìˆ˜ ìˆë‹¤\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"ì—…ë°ì´íŠ¸ ê°€ëŠ¥í•˜ë‹¤\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"PWAê°€ ì˜¤í”„ë¼ì¸ìœ¼ë¡œ ì¼ í•  ìˆ˜ìˆëŠ” ê°€ì¥ í° ì—­í• ì„ í•œë‹¤.\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.h2, {\n        children: \"service workers\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: _jsx(_components.img, {\n          src: \"/img/service-worker.png\",\n          alt: \"service worker ë¸”ë£¨ í”„ë¦°íŠ¸\"\n        })\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"service workerëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ requestë¥¼ ë³´ë‚¼ ë•Œ, ë§ˆì¹˜ ë„¤íŠ¸ì›Œí¬ í”„ë¡ì‹œ ì²˜ëŸ¼ (ì˜¤í”„ë¼ì¸ì¼ë•Œë„) requestë¥¼ ë°›ì•„ì„œ Cache storage APIì—ì„œ ì •ë³´ë¥¼ ë°›ì•„ì˜¬ì§€, ë„¤íŠ¸ì›Œí¬ë¥¼ ì´ìš©í•˜ì—¬ ì •ë³´ë¥¼ ë°›ì•„ì˜¬ì§€, í˜¹ì€ local ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì •ë³´ë¥¼ ë°›ì•„ì˜¬ ì§€ ì •í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ë§ˆì¹˜ platform ì•±ë“¤ ì²˜ëŸ¼. ë” ë‚˜ì•„ê°€ service workersëŠ” ì´ëŸ¬í•œ ì¼ë“¤ ë„ ê°€ëŠ¥í•˜ê²Œ ë§Œë“ ë‹¤.\"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"ì˜¤í”„ë¼ì¸ìœ¼ë¡œ ì½˜í…íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"background sync\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"push notification\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.h3, {\n        children: \"life cycle\"\n      }), \"\\n\", _jsxs(_components.ol, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"main.js ì—ì„œ service workerë¥¼ ì–¸ê¸‰í•˜ë©° ë“±ë¡(register)ì„ í•œë‹¤. (í˜¹ì€ index.htmlì—ì„œ ë°”ë¡œ...)\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"registerí›„ eventë¥¼ install í•œë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"installì„ í•˜ë©´ service workerê°€ activate ëœë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"event ë¥¼ active ì‹œí‚¨ë‹¤.\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"service workerê°€ eventë¥¼ í™•ì¸í•˜ê³  responseë¥¼ ê°ì§€í•˜ê¸° ì‹œì‘í•œë‹¤.\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"âš ï¸Â service workerê°€ ë°”ë€Œì§€ ì•ŠëŠ”ë‹¤ë©´ 2, 3, 4ëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤. ë§Œì•½ service workerê°€ ì—…ë°ì´íŠ¸ ëœë‹¤ë©´ 2,3,4ëŠ” ë‹¤ì‹œ ì‹¤í–‰ì´ ëœë‹¤.\"\n      }), \"\\n\", _jsx(_components.h3, {\n        children: \"code\"\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-jsx\",\n          children: \"// main.js\\n\\n// Register\\nif (\\\"serviceWorker\\\" in navigator) {\\n  console.log(\\\"Service Worker supported\\\");\\n  window.addEventListener(\\\"load\\\", () => {\\n    navigator.serviceWorker\\n      .register(\\\"sw.js\\\")\\n      .then((reg) => console.log(\\\"Service worker registered\\\", reg))\\n      .catch((err) => console.warn(\\\"Service worker Error\\\", err));\\n  });\\n}\\n\"\n        })\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-jsx\",\n          children: \"// sw.js\\n\\n// default cache\\nconst cacheName = \\\"v1\\\";\\n\\nconst cacheAssets = [\\n  \\\"index.html\\\",\\n  \\\"about.html\\\",\\n  \\\"/css/style.css\\\",\\n  \\\"/js/main.js\\\",\\n];\\n\\n// Install\\nself.addEventListener(\\\"install\\\", (e) => {\\n  console.log(\\\"Service worker installed\\\");\\n\\n  e.waitUntil(\\n    caches\\n      .open(cacheName)\\n      .then((cache) => {\\n        console.log(\\\"Service Worker: Caching files\\\");\\n        cache.addAll(cacheAssets);\\n      })\\n      .then(() => {\\n        self.skipWaiting();\\n      }) //ì—¬ê¸° ê¹Œì§€ ì§„í–‰ì´ ëœë‹¤ë©´ Cache Storageì— cache Assetsê°€ ì €ì¥ì´ ëœë‹¤.\\n  ); // promiseê°€ ëë‚ ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦°ë‹¤\\n});\\n\\n// Activate\\nself.addEventListener(\\\"activate\\\", (e) => {\\n  console.log(\\\"Service Worker activated\\\");\\n\\n  // Remove unwanted caches\\n  e.waitUntil(\\n    caches.keys().then((cacheNames) => {\\n      return Promise.all(\\n        cachesNames.map((cache) => {\\n          if (cache !== cacheName) {\\n            // cache ì´ë¦„ì´ ê°™ì§€ ì•Šë‹¤ë©´ ì˜›ë‚  ìºì‰¬ë¥¼ ì§€ìš´ë‹¤.\\n            console.log(\\\"Service Worker: Clearing old cache\\\");\\n            return caches.delete(cache);\\n          }\\n        })\\n      );\\n    })\\n  );\\n}); // ì˜›ë‚  ìºì‹œë“¤ì„ ì§€ìš°ê³  ìƒˆë¡œìš´ ë²„ì „ì„ ë®ëŠ”ë‹¤.\\n\\n// Call fetch event\\nself.addEventListener(\\\"fetch\\\", (e) => {\\n  console.log('Service Worker: Fetcdhing...\\\"');\\n  e.respondWith(\\n    fetch(e.request).catch(() => caches.match(e.request)) // Cache ì— ìˆëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— ì»¨ë‚µì…˜ì´ ì—†ì–´ë„ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆë”°.\\n  );\\n});\\n\"\n        })\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ë˜ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œëŠ” cacheì— ëª¨ë“  responseë¥¼ ë‹¤ ë°›ì•„ì˜¤ëŠ” ë°©ë²•ì´ í•˜ë‚˜ ë” ìˆë‹¤. í˜ì´ì§€(íŒŒì¼)ì„ í•˜ë‚˜ í•˜ë‚˜ ë‹¤ cacheNamesë¡œ ì–¸ê¸‰í•  í•„ìš” ì—†ì´ ëª¨ë“  í˜ì´ì§€ë¥¼ (ë°©ë¬¸í•œ) ì „ë¶€ cacheì— ì €ì¥í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"language-jsx\",\n          children: \"// default cache\\nconst cacheName = \\\"v2\\\";\\n\\n// Install\\nself.addEventListener(\\\"install\\\", (e) => {\\n  console.log(\\\"Service worker installed\\\");\\n});\\n\\n// Activate\\nself.addEventListener(\\\"activate\\\", (e) => {\\n  console.log(\\\"Service Worker activated\\\");\\n\\n  // Remove unwanted caches\\n  e.waitUntil(\\n    caches.keys().then((cacheNames) => {\\n      return Promise.all(\\n        cachesNames.map((cache) => {\\n          if (cache !== cacheName) {\\n            // cache ì´ë¦„ì´ ê°™ì§€ ì•Šë‹¤ë©´ ì˜›ë‚  ìºì‰¬ë¥¼ ì§€ìš´ë‹¤.\\n            console.log(\\\"Service Worker: Clearing old cache\\\");\\n            return caches.delete(cache);\\n          }\\n        })\\n      );\\n    })\\n  );\\n}); // ì˜›ë‚  ìºì‹œë“¤ì„ ì§€ìš°ê³  ìƒˆë¡œìš´ ë²„ì „ì„ ë®ëŠ”ë‹¤.\\n\\n// Call fetch event\\nself.addEventListener(\\\"fetch\\\", (e) => {\\n  console.log('Service Worker: Fetcdhing...\\\"');\\n  e.respondWith(\\n    fetch(e.request)\\n      .then((res) => {\\n        // Make copy/clone of response\\n        const resClone = res.clone();\\n\\n        // Open cache\\n        caches.open(cacheName).then((cache) => {\\n          // Add response to cache\\n          cache.put(e.request, resClone);\\n        });\\n        return res;\\n      })\\n      .catch((err) => caches.match(e.request).then((res) => res))\\n  );\\n});\\n\"\n        })\n      }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n        children: \"Caching\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ì´ì œ cache storageê°€ pwaì—ì„œ ì–¼ë§ˆë‚˜ ì¤‘ìš”í•œì§€ ì•Œì•„ ëƒˆë‹¤ë©´, ë¬´ì—‡ì„ caching í•´ì•¼í• ê¹Œ?\"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"main html\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"css\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"UIì— ì‚¬ìš©ë˜ëŠ” ì´ë¯¸ì§€ë“¤\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"UIì— ì‚¬ìš©ë˜ëŠ” javascript\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"ê¸°ë³¸ ë°ì´í„° (JSON)\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"í°íŠ¸\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"SPAê°€ ì•„ë‹Œ ìƒí™©ì—ì„œ ë¹ ë¥¸ page ë³€ê²½ì´ í•„ìš”í• ë•Œ\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"Service WorkerëŠ” ì´ í˜ì´ì§€ì—ì„œ ê°ë‹¹í•˜ê¸°ì—ëŠ” ë„ˆë¬´ë‚˜ë„ ë§ì€ ì´ì•¼ê¸° ì´ë‹ˆê¹... \", _jsx(_components.a, {\n          href: \"https://web.dev/learn/pwa/\",\n          children: \"ì—¬ê¸°\"\n        }), \"ì—ì„œ í™•ì¸í•´ì£¼ì...\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"ë‚˜ì¤‘ì—ëŠ” Workboxë„ í•œë²ˆ ê³µë¶€ í•´ë³´ì .. (32%ê°€ ì‚¬ìš©í•˜ëŠ” service workers ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¼ëŠ”ë° ...)\"\n      }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n        children: \"React & PWA\"\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"React ë„ ë¹„ìŠ·í•˜ê²Œ ì§„í–‰ì´ ë˜ê¸° ë•Œë¬¸ì— \", _jsx(_components.a, {\n          href: \"https://github.com/donghakang/practice-react/tree/master/ex33-pwa\",\n          children: \"source code\"\n        }), \" ë¥¼ ë³´ë©´ì„œ PWAë¥¼ ë§Œë“¤ì–´ë³´ì!\"]\n      })]\n    });\n  }\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true}