---
title: 지금 너의 위치는 .. Next.js로 현재 위치 찾기
author: "Dongha Kang"
date: "2022-06-09"
tag: ["Next.js", "JavaScript"]
---


현재 naver map을 사용하면서, 위도 경도를 기반으로 맵을 띄우는 것을 제작했는데, 모든 지도들은 현재 위치를 기반으로 작동이 되는 앱들 처럼 웹에서도 그것을 해보고 싶었다.

아름답게도 크롬, 그리고 다른 브라우저에서 navigator라는 자바스크립트 코드를 이용해서 간단하게 현재 위치를 받아 올 수 있었다.

많은 방법이 있지만, 내가 한 방식은 이와 같다.

```jsx
...
	useEffect(() => {
    const { geolocation } = navigator

    geolocation.getCurrentPosition(
      (position) => {
        // success.
        setLat(position.coords.latitude)
        setLng(position.coords.longitude)
        setIsLoading(false)
      },
      (error) => {
        console.warn('Fail to fetch current location', error)
        setLat(37)
        setLng(127)
        setIsLoading(false)
      },
      {
        enableHighAccuracy: false,
        maximumAge: 0,
        timeout: Infinity,
      }
    )
  }, [])
...
```

읽기 쉬운 코드이지만,

`navigator.geolocation.getCurrentPosition` 은 세개의 파라미터를 제안하고 이는 순서대로 successCallback, failureCallback (optional), options (optional) 이다. 

최초 사이트에 들어갈때, 크롬 같은경우는 현재 위치를 사용할 것 이냐 물어보고 Yes 를 누르면 successCallback 에 있는 코드를, No 를 누르면 failureCallback 에 있는 코드를 진행하게 된다.

options들은 영어 그대로, 속도적인 측면, 디버깅에 대한 것에서 값들을 살짝 tweaking 할 수 있다.